{
    "mixed-port": 2080,
    "allow-lan": true,
    "tcp-concurrent": true,
    "enable-process": true,
    "find-process-mode": "always",
    "global-client-fingerprint": "chrome",
    "mode": "rule",
    "log-level": "debug",
    "ipv6": false,
    "keep-alive-interval": 30,
    "unified-delay": false,
    "profile": {
        "store-selected": true,
        "store-fake-ip": true
    },
    "sniffer": {
        "enable": true,
        "sniff": {
            "HTTP": {
                "ports": [
                    80,
                    "8080-8880"
                ],
                "override-destination": true
            },
            "TLS": {
                "ports": [
                    443,
                    8443
                ]
            },
            "QUIC": {
                "ports": [
                    443,
                    8443
                ]
            }
        }
    },
    "tun": {
        "enable": true,
        "stack": "mixed",
        "dns-hijack": [
            "any:53"
        ],
        "auto-route": true,
        "auto-detect-interface": true,
        "strict-route": true
    },
    "dns": {
        "enable": true,
        "listen": ":1053",
        "prefer-h3": false,
        "ipv6": false,
        "enhanced-mode": "fake-ip",
        "fake-ip-filter": [
            "~domain~",
            "+.lan",
            "+.local"
        ],
        "nameserver": [
            "~dns~"
        ]
    },
    "proxies": [
        {
            "name": "~outbound~",
            "type": "vless",
            "server": "~domain~",
            "port": 443,
            "uuid": "~uid~",
            "network": "tcp",
            "flow": "xtls-rprx-vision",
            "tls": true,
            "reality-opts": {
                "public-key": "~public_key~",
                "short-id": "~short_id~"
            },
            "servername": "~server_name~",
            "client-fingerprint": "chrome"
        }
    ],
    "proxy-groups": [
        {
            "name": "PROXY",
            "type": "select",
            "proxies": [
                "~outbound~"
            ]
        }
    ],
    "rule-providers": {
        "ru-bundle": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/ru-bundle/rule.mrs",
            "path": "./ru-bundle/rule.mrs",
            "interval": 86400
        },
        "refilter_domains": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/domain-rule.mrs",
            "path": "./re-filter/domain-rule.mrs",
            "interval": 86400
        },
        "refilter_ipsum": {
            "type": "http",
            "behavior": "ipcidr",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/ip-rule.mrs",
            "path": "./re-filter/ip-rule.mrs",
            "interval": 86400
        },
        "oisd_big": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/big.mrs",
            "path": "./oisd/big.mrs",
            "interval": 86400
        },
        "oisd_small": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/small.mrs",
            "path": "./oisd/small.mrs",
            "interval": 86400
        },
        "oisd_nsfw_small": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/nsfw_small.mrs",
            "path": "./oisd/nsfw_small.mrs",
            "interval": 86400
        },
        "oisd_nsfw_big": {
            "type": "http",
            "behavior": "domain",
            "format": "mrs",
            "url": "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/nsfw.mrs",
            "path": "./oisd/nsfw_big.mrs",
            "interval": 86400
        }
    },
    "rules": [
        [
            "RULE-SET",
            "oisd_small",
            "REJECT"
        ],
        [
            "RULE-SET",
            "oisd_big",
            "REJECT"
        ],
        [
            "RULE-SET",
            "oisd_nsfw_small",
            "REJECT"
        ],
        [
            "RULE-SET",
            "oisd_nsfw_big",
            "REJECT"
        ],
        {
            "type": "DOMAIN-SUFFIX",
            "list": "~block~",
            "action": "REJECT"
        },
        {
            "type": "PROCESS-NAME",
            "list": "~process~",
            "action": "PROXY"
        },
        {
            "type": "PROCESS-NAME",
            "list": "~package~",
            "action": "PROXY"
        },
        [
            "RULE-SET",
            "ru-bundle",
            "PROXY"
        ],
        [
            "RULE-SET",
            "refilter_domains",
            "PROXY"
        ],
        [
            "RULE-SET",
            "refilter_ipsum",
            "PROXY"
        ],
        {
            "type": "DOMAIN-SUFFIX",
            "list": "~warp~",
            "action": "PROXY"
        },
        {
            "type": "DOMAIN-SUFFIX",
            "list": "~pac~",
            "action": "PROXY"
        },
        {
            "type": "MATCH",
            "action": "DIRECT"
        }
    ]
}
